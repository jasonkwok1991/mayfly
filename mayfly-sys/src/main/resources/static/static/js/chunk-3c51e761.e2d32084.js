(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c51e761"],{"050b":function(e,t,r){"use strict";var n=r("a7e9");t["a"]={ResourceTypeEnum:(new n["a"]).add("MENU","菜单",1).add("PERMISSION","权限",2),accountStatus:(new n["a"]).add("ENABLE","正常",1).add("DISABLE","禁用",0),logType:(new n["a"]).add("UPDATE","修改",2).add("DELETE","删除",3).add("SYS_LOG","系统",4).add("ERR_LOG","异常",5)}},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"18ac":function(e,t,r){},2532:function(e,t,r){"use strict";var n=r("23e7"),a=r("5a34"),s=r("1d80"),i=r("ab13");n({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~String(s(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},2945:function(e,t,r){"use strict";var n=r("d4ec"),a=r("bee2"),s=r("d789"),i=function(){function e(t,r){Object(n["a"])(this,e),this.url=t,this.method=r}return Object(a["a"])(e,[{key:"setUrl",value:function(e){return this.url=e,this}},{key:"setMethod",value:function(e){return this.method=e,this}},{key:"getUrl",value:function(){return s["a"].getApiUrl(this.url)}},{key:"request",value:function(e){return s["a"].send(this,e)}}],[{key:"create",value:function(t,r){return new e(t,r)}}]),e}();t["a"]=i},"6e31":function(e,t,r){},"841c":function(e,t,r){"use strict";var n=r("d784"),a=r("825a"),s=r("1d80"),i=r("129f"),o=r("14c3");n("search",1,(function(e,t,r){return[function(t){var r=s(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var s=a(e),c=String(this),l=s.lastIndex;i(l,0)||(s.lastIndex=0);var u=o(s,c);return i(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},a05d:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return i}));var n=r("2262"),a={resource:n["a"].code("resource"),save:n["a"].code("resource:save"),update:n["a"].code("resource:update"),del:n["a"].code("resource:delete")},s={role:n["a"].code("role"),del:n["a"].code("role:delete"),saveResources:n["a"].code("role:saveResources")},i={account:n["a"].code("account"),changeStatus:n["a"].code("account:changeStatus"),del:n["a"].code("account:delete"),saveRoles:n["a"].code("account:saveRoles")}},a169:function(e,t,r){"use strict";var n=r("6e31"),a=r.n(n);a.a},a434:function(e,t,r){"use strict";var n=r("23e7"),a=r("23cb"),s=r("a691"),i=r("50c4"),o=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),d=r("ae40"),p=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,v=Math.min,g=9007199254740991,h="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var r,n,u,d,p,m,y=o(this),b=i(y.length),x=a(e,b),k=arguments.length;if(0===k?r=n=0:1===k?(r=0,n=b-x):(r=k-2,n=v(f(s(t),0),b-x)),b+r-n>g)throw TypeError(h);for(u=c(y,n),d=0;d<n;d++)p=x+d,p in y&&l(u,d,y[p]);if(u.length=n,r<n){for(d=x;d<b-n;d++)p=d+n,m=d+r,p in y?y[m]=y[p]:delete y[m];for(d=b;d>b-n+r;d--)delete y[d-1]}else if(r>n)for(d=b-n;d>x;d--)p=d+n-1,m=d+r-1,p in y?y[m]=y[p]:delete y[m];for(d=0;d<r;d++)y[d+x]=arguments[d+2];return y.length=b-n+r,u}})},a4d0:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return _}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"menu"},[r("div",{staticClass:"toolbar"},[e._m(0),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.save.code,expression:"permission.save.code"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.addResource(!1)}}},[e._v("添加")])],1),r("el-tree",{staticClass:"none-select",attrs:{indent:38,"node-key":"id",props:e.props,data:e.data,"default-expanded-keys":e.defaultExpandedKeys,"expand-on-click-node":!1},on:{"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var n=t.data;return r("span",{staticClass:"custom-tree-node"},[n.type===e.enums.ResourceTypeEnum.MENU.value?r("span",{staticStyle:{"font-size":"13px"}},[r("span",{staticStyle:{color:"#3c8dbc"}},[e._v("【")]),e._v(" "+e._s(n.name)+" "),r("span",{staticStyle:{color:"#3c8dbc"}},[e._v("】")]),null!==n.children?r("el-tag",{attrs:{size:"mini"}},[e._v(e._s(n.children.length))]):e._e()],1):e._e(),n.type===e.enums.ResourceTypeEnum.PERMISSION.value?r("span",{staticStyle:{"font-size":"13px"}},[r("span",{staticStyle:{color:"#3c8dbc"}},[e._v("【")]),r("span",{style:1==n.status?"color: #67c23a;":"color: #f67c6c;"},[e._v(e._s(n.name))]),r("span",{staticStyle:{color:"#3c8dbc"}},[e._v("】")])]):e._e(),r("el-link",{staticStyle:{"margin-left":"25px"},attrs:{icon:"el-icon-view",type:"info",underline:!1},on:{click:function(t){return e.info(n)}}}),r("el-link",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.update.code,expression:"permission.update.code"}],attrs:{type:"primary",icon:"el-icon-edit",underline:!1},on:{click:function(t){return e.editResource(n)}}}),n.type===e.enums.ResourceTypeEnum.MENU.value?r("el-link",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.save.code,expression:"permission.save.code"}],attrs:{icon:"el-icon-circle-plus-outline",underline:!1,type:"success"},on:{click:function(t){return e.addResource(n)}}}):e._e(),1===n.status&&n.type===e.enums.ResourceTypeEnum.PERMISSION.value?r("el-link",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.resource.code,expression:"permission.resource.code"}],attrs:{icon:"el-icon-circle-close",underline:!1,type:"warning"},on:{click:function(t){return e.changeStatus(n,0)}}}):e._e(),0===n.status&&n.type===e.enums.ResourceTypeEnum.PERMISSION.value?r("el-link",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.resource.code,expression:"permission.resource.code"}],attrs:{type:"success",icon:"el-icon-circle-check",underline:!1,plain:""},on:{click:function(t){return e.changeStatus(n,1)}}}):e._e(),null==n.children?r("el-link",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.del.code,expression:"permission.del.code"}],attrs:{type:"danger",icon:"el-icon-remove-outline",underline:!1,plain:""},on:{click:function(t){return e.deleteMenu(n)}}}):e._e()],1)}}])}),r("ResourceEdit",{attrs:{title:e.dialogForm.title,visible:e.dialogForm.visible,data:e.dialogForm.data,typeDisabled:e.dialogForm.typeDisabled,departTree:e.data,type:e.dialogForm.type},on:{"update:visible":function(t){return e.$set(e.dialogForm,"visible",t)},"update:data":function(t){return e.$set(e.dialogForm,"data",t)},"val-change":e.valChange}})],1)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("span",{staticStyle:{"font-size":"14px"}},[r("i",{staticClass:"el-icon-info"}),e._v("红色字体表示禁用状态 ")])])}],s=(r("caad"),r("c975"),r("a434"),r("b0c0"),r("ac1f"),r("2532"),r("841c"),r("b85c")),i=(r("96cf"),r("1da1")),o=r("d4ec"),c=r("bee2"),l=r("262e"),u=r("2caf"),d=r("9ab4"),p=r("60a3"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"menu-dialog"},[r("el-dialog",{attrs:{title:e.title,visible:e.visible,"show-close":!1,width:"28%"}},[r("el-form",{ref:"menuForm",attrs:{model:e.form,rules:e.rules,"label-width":"85px",size:"small"}},[r("el-form-item",{attrs:{prop:"name",label:"名称",required:""}},[r("el-input",{attrs:{placeholder:"请输入资源名","auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{prop:"type",label:"类型",required:""}},e._l(e.enums.ResourceTypeEnum,(function(t){return r("el-radio",{key:t.value,attrs:{disabled:e.typeDisabled,label:t.value},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v(e._s(t.label))])})),1),e.form.type===e.enums.ResourceTypeEnum.MENU.value?r("el-form-item",{attrs:{label:"样式"}},[r("el-input",{attrs:{placeholder:"请输入菜单图标样式"},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon","string"===typeof t?t.trim():t)},expression:"form.icon"}})],1):e._e(),e.form.type===e.enums.ResourceTypeEnum.MENU.value?r("el-form-item",{attrs:{prop:"code",label:"路由"}},[r("el-input",{attrs:{placeholder:"请输入路由code"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url","string"===typeof t?t.trim():t)},expression:"form.url"}})],1):e._e(),r("el-form-item",{attrs:{prop:"code",label:"权限code"}},[r("el-input",{attrs:{placeholder:"请输入权限code"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code","string"===typeof t?t.trim():t)},expression:"form.code"}})],1),r("el-form-item",{attrs:{label:"序号",prop:"weight",required:""}},[r("el-input",{attrs:{type:"number",placeholder:"请输入序号"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight","string"===typeof t?t.trim():t)},expression:"form.weight"}})],1)],1),r("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary",loading:e.btnLoading,size:"mini"},on:{click:e.btnOk}},[e._v("确 定")]),r("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.cancel()}}},[e._v("取 消")])],1)],1)],1)},f=[],v=r("d21a"),g=r("050b"),h=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.enums=g["a"],e.dialogForm={title:"",visible:!1,data:{}},e.props={value:"id",label:"name",children:"children"},e.form={id:null,name:null,pid:null,code:null,url:null,icon:null,type:null,weight:null},e.btnLoading=!1,e.rules={name:[{required:!0,message:"请输入资源名称",trigger:["change","blur"]}],weight:[{required:!0,message:"请输入序号",trigger:["change","blur"]}]},e}return Object(c["a"])(r,[{key:"onDataChange",value:function(){this.data&&this.$Utils.copyProperties(this.data,this.form)}},{key:"btnOk",value:function(){var e=this,t=this.form.id?v["c"].update:v["c"].save,r=this.$refs["menuForm"];r.validate((function(r){if(!r)return!1;t.request(e.form).then((function(t){e.$emit("val-change",e.form),e.btnLoading=!0,e.$message.success("保存成功"),setTimeout((function(){e.btnLoading=!1}),1e3),e.cancel()}))}))}},{key:"cancel",value:function(){var e=this;this.$emit("update:visible",!1),this.$emit("cancel"),setTimeout((function(){var t=e.$refs["menuForm"];t.resetFields(),e.$Utils.resetProperties(e.form)}),200)}}]),r}(p["c"]);Object(d["a"])([Object(p["b"])()],h.prototype,"visible",void 0),Object(d["a"])([Object(p["b"])()],h.prototype,"data",void 0),Object(d["a"])([Object(p["b"])()],h.prototype,"title",void 0),Object(d["a"])([Object(p["b"])()],h.prototype,"type",void 0),Object(d["a"])([Object(p["b"])()],h.prototype,"typeDisabled",void 0),Object(d["a"])([Object(p["d"])("data",{deep:!0})],h.prototype,"onDataChange",null),h=Object(d["a"])([Object(p["a"])({name:"ResourceEdit"})],h);var y=h,b=y,x=(r("b1b2"),r("2877")),k=Object(x["a"])(b,m,f,!1,null,null,null),E=k.exports,O=r("a05d"),w=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.enums=g["a"],e.permission=O["b"],e.showBtns=!1,e.rightClickData={},e.dialogForm={title:"",visible:!1,data:{pid:0,type:1},typeDisabled:!0},e.data=[],e.props={label:"name",children:"children"},e.defaultExpandedKeys=[],e}return Object(c["a"])(r,[{key:"mounted",value:function(){this.search()}},{key:"search",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["c"].list.request(null);case 2:t=e.sent,this.data=t;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteMenu",value:function(e){var t=this;this.$confirm("此操作将删除 [".concat(e.name,"], 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){v["c"].del.request({id:e.id}).then((function(e){t.$message.success("删除成功！"),t.search()}))}))}},{key:"addResource",value:function(e){var t=this.dialogForm;t.visible=!0,t.data={pid:0,type:1};var r=g["a"].ResourceTypeEnum["MENU"].value,n=g["a"].ResourceTypeEnum["PERMISSION"].value;if(!e)return t.typeDisabled=!0,t.data.type=r,void(t.title="添加顶级菜单");if(t.data.pid=e.id,t.title="添加“"+e.name+"”的子资源 ",null===e.children||0===e.children.length)t.typeDisabled=!1;else{t.typeDisabled=!0;var a,i=!1,o=Object(s["a"])(e.children);try{for(o.s();!(a=o.n()).done;){var c=a.value;if(c.type===n){i=!0;break}}}catch(l){o.e(l)}finally{o.f()}t.data.type=i?n:r}}},{key:"editResource",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogForm.visible=!0,e.next=3,v["c"].detail.request({id:t.id});case 3:this.dialogForm.data=e.sent,this.dialogForm.typeDisabled=!0,this.dialogForm.title="修改“"+t.name+"”菜单";case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"valChange",value:function(e){this.search(),this.dialogForm.visible=!1}},{key:"changeStatus",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["c"].changeStatus.request({id:t.id,status:r});case 2:t.status=r,this.$message.success((1===r?"启用":"禁用")+"成功！");case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"handleNodeExpand",value:function(e,t){var r=t.data.id;this.defaultExpandedKeys.includes(r)||this.defaultExpandedKeys.push(r)}},{key:"handleNodeCollapse",value:function(e,t){this.removeDeafultExpandId(t.data.id);var r,n=t.childNodes,a=Object(s["a"])(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(2==i.data.type)return;i.expanded&&this.removeDeafultExpandId(i.data.id),this.handleNodeCollapse(e,i)}}catch(o){a.e(o)}finally{a.f()}}},{key:"removeDeafultExpandId",value:function(e){var t=this.defaultExpandedKeys.indexOf(e);t>-1&&this.defaultExpandedKeys.splice(t,1)}},{key:"info",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["c"].detail.request({id:t.id});case 2:if(r=e.sent,r.type!==g["a"].ResourceTypeEnum["MENU"].value){e.next=6;break}return this.$alert('<strong style="margin-right: 18px">名称:</strong>'+r.name+' <br/><strong style="margin-right: 18px">图标:</strong>'+(r.icon?r.icon:"无")+' <br/><strong style="margin-right: 18px">路由:</strong>'+(r.url?r.url:"无")+' <br/><strong style="margin-right: 18px">权限code:</strong>'+(r.code?r.code:"无")+' <br/><strong style="margin-right: 18px">权重:</strong>'+r.weight+' <br/><strong style="margin-right: 18px">创建人:</strong>'+r.creator+' <br/><strong style="margin-right: 18px">创建时间:</strong>'+r.createTime+' <br/><strong style="margin-right: 18px">修改人:</strong>'+r.modifier+' <br/><strong style="margin-right: 18px">修改时间:</strong>'+r.updateTime,"菜单详情",{type:"info",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,showConfirmButton:!1}).catch((function(e){})),e.abrupt("return");case 6:this.$alert('<strong style="margin-right: 18px">名称:</strong>'+r.name+' <br/><strong style="margin-right: 18px">权限code:</strong>'+(r.code?r.code:"无")+' <br/><strong style="margin-right: 18px">权重:</strong>'+r.weight+' <br/><strong style="margin-right: 18px">创建人:</strong>'+r.creator+' <br/><strong style="margin-right: 18px">创建时间:</strong>'+r.createTime+' <br/><strong style="margin-right: 18px">修改人:</strong>'+r.modifier+' <br/><strong style="margin-right: 18px">修改时间:</strong>'+r.updateTime,"权限详情",{type:"info",dangerouslyUseHTMLString:!0,closeOnClickModal:!0,showConfirmButton:!1}).catch((function(e){}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(p["c"]);w=Object(d["a"])([Object(p["a"])({name:"ResourceList",components:{ResourceEdit:E}})],w);var R=w,S=R,j=(r("a169"),Object(x["a"])(S,n,a,!1,null,null,null)),_=j.exports},a7e9:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("d4ec"),a=r("bee2"),s=function(){function e(){Object(n["a"])(this,e)}return Object(a["a"])(e,[{key:"add",value:function(e,t,r){return this[e]={label:t,value:r},this}},{key:"getLabelByValue",value:function(e){if(void 0===e||null===e)return"";for(var t in this){var r=this[t];if(r&&r.value===e)return r.label}return""}}]),e}()},b1b2:function(e,t,r){"use strict";var n=r("18ac"),a=r.n(n);a.a},caad:function(e,t,r){"use strict";var n=r("23e7"),a=r("4d64").includes,s=r("44d2"),i=r("ae40"),o=i("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!o},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},d21a:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o}));var n=r("2945"),a={list:n["a"].create("/sys/resources","get"),detail:n["a"].create("/sys/resources/{id}","get"),save:n["a"].create("/sys/resources","post"),update:n["a"].create("/sys/resources/{id}","put"),del:n["a"].create("/sys/resources/{id}","delete"),changeStatus:n["a"].create("/sys/resources/{id}/{status}","put")},s={list:n["a"].create("/sys/roles","get"),save:n["a"].create("/sys/roles","post"),update:n["a"].create("/sys/roles/{id}","put"),del:n["a"].create("/sys/roles/{id}","delete"),roleResourceIds:n["a"].create("/sys/roles/{id}/resourceIds","get"),roleResources:n["a"].create("/sys/roles/{id}/resources","get"),saveResources:n["a"].create("/sys/roles/{id}/resources","post")},i={list:n["a"].create("/sys/accounts","get"),save:n["a"].create("/sys/accounts","post"),update:n["a"].create("/sys/accounts/{id}","put"),del:n["a"].create("/sys/accounts/{id}","delete"),changeStatus:n["a"].create("/sys/accounts/{id}/{status}","put"),roleIds:n["a"].create("/sys/accounts/{id}/roleIds","get"),roles:n["a"].create("/sys/accounts/{id}/roles","get"),resources:n["a"].create("/sys/accounts/{id}/resources","get"),saveRoles:n["a"].create("/sys/accounts/{id}/roles","post")},o={list:n["a"].create("/sys/logs","get")}}}]);