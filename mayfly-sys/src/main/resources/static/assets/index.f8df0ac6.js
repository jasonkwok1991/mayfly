var Ve=Object.defineProperty,be=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var Oe=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var Se=(e,t,E)=>t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:E}):e[t]=E,ue=(e,t)=>{for(var E in t||(t={}))xe.call(t,E)&&Se(e,E,t[E]);if(Oe)for(var E of Oe(t))Ye.call(t,E)&&Se(e,E,t[E]);return e},de=(e,t)=>be(e,ke(t));import{A as G}from"./Api.ef456f6a.js";import{c as Xe,_ as Ke}from"./codemirror.a19facba.js";import{a1 as we,a2 as z,a3 as qe,a4 as Qe,a5 as $e,a6 as Ce,a7 as Z,a8 as Je,a9 as ze,aa as Ze,ab as je,ac as et,ad as tt,ae as rt,af as Et,ag as nt,ah as at,ai as ot,aj as st,ak as it,s as Tt,r as Rt,a as lt,x as Nt,o as At,t as It,I as Ot,e as V,f as k,h as x,i as M,E as B,F as j,D as ee,k as q,l as St}from"./vendor.e3fc7715.js";import{n as Q}from"./assert.dbc0392f.js";import"./index.b92197cf.js";var ut={exports:{}};const Y={dbs:G.create("/devops/dbs","get"),tableMetadata:G.create("/devops/dbs/{id}/t-metadata","get"),columnMetadata:G.create("/devops/dbs/{id}/c-metadata","get"),hintTables:G.create("/devops/dbs/{id}/hint-tables","get"),selectData:G.create("/devops/dbs/{id}/select-data","get"),saveSql:G.create("/devops/dbs/{id}/sql","post"),getSql:G.create("/devops/dbs/{id}/sql","get"),lsFile:G.create("/devops/machines/files/{fileId}/ls","get"),rmFile:G.create("/devops/machines/files/{fileId}/rm","delete"),uploadFile:G.create("/devops/machines/files/upload","post"),fileContent:G.create("/devops/machines/files/{fileId}/cat","get"),updateFileContent:G.create("/devops/machines/files/{id}","put"),addConf:G.create("/devops/machines/{machineId}/files","post"),delConf:G.create("/devops/machines/files/{id}","delete")};var bE="",kE="";(function(e,t){(function(E){E(Xe.exports,ut.exports)})(function(E){var O,l,L,d,A={QUERY_DIV:";",ALIAS_KEYWORD:"AS"},I=E.Pos,p=E.cmpPos;function c(R){return Object.prototype.toString.call(R)=="[object Array]"}function n(R){var T=R.doc.modeOption;return T==="sql"&&(T="text/x-sql"),E.resolveMode(T).keywords}function a(R){var T=R.doc.modeOption;return T==="sql"&&(T="text/x-sql"),E.resolveMode(T).identifierQuote||"`"}function r(R){return typeof R=="string"?R:R.text}function o(R,T){return c(T)&&(T={columns:T}),T.text||(T.text=R),T}function N(R){var T={};if(c(R))for(var u=R.length-1;u>=0;u--){var P=R[u];T[r(P).toUpperCase()]=o(r(P),P)}else if(R)for(var D in R)T[D.toUpperCase()]=o(D,R[D]);return T}function C(R){return O[R.toUpperCase()]}function S(R){var T={};for(var u in R)R.hasOwnProperty(u)&&(T[u]=R[u]);return T}function h(R,T){var u=R.length,P=r(T).substr(0,u);return R.toUpperCase()===P.toUpperCase()}function s(R,T,u,P){if(c(u))for(var D=0;D<u.length;D++)h(T,u[D])&&R.push(P(u[D]));else for(var U in u)if(u.hasOwnProperty(U)){var _=u[U];!_||_===!0?_=U:_=_.displayText?{text:_.text,displayText:_.displayText}:_.text,h(T,_)&&R.push(P(_))}}function i(R){R.charAt(0)=="."&&(R=R.substr(1));for(var T=R.split(d+d),u=0;u<T.length;u++)T[u]=T[u].replace(new RegExp(d,"g"),"");return T.join(d)}function f(R){for(var T=r(R).split("."),u=0;u<T.length;u++)T[u]=d+T[u].replace(new RegExp(d,"g"),d+d)+d;var P=T.join(".");return typeof R=="string"?P:(R=S(R),R.text=P,R)}function $(R,T,u,P){for(var D=!1,U=[],_=T.start,g=!0;g;)g=T.string.charAt(0)==".",D=D||T.string.charAt(0)==d,_=T.start,U.unshift(i(T.string)),T=P.getTokenAt(I(R.line,T.start)),T.string=="."&&(g=!0,T=P.getTokenAt(I(R.line,T.start)));var W=U.join(".");s(u,W,O,function(m){return D?f(m):m}),s(u,W,l,function(m){return D?f(m):m}),W=U.pop();var v=U.join("."),H=!1,y=v;if(!C(v)){var F=v;v=Ne(v,P),v!==F&&(H=!0)}var b=C(v);return b&&b.columns&&(b=b.columns),b&&s(u,W,b,function(m){var J=v;return H==!0&&(J=y),typeof m=="string"?m=J+"."+m:(m=S(m),m.text=J+"."+m.text),D?f(m):m}),_}function He(R,T){for(var u=R.split(/\s+/),P=0;P<u.length;P++)u[P]&&T(u[P].replace(/[`,;]/g,""))}function Ne(R,T){for(var u=T.doc,P=u.getValue(),D=R.toUpperCase(),U="",_="",g=[],W={start:I(0,0),end:I(T.lastLine(),T.getLineHandle(T.lastLine()).length)},v=P.indexOf(A.QUERY_DIV);v!=-1;)g.push(u.posFromIndex(v)),v=P.indexOf(A.QUERY_DIV,v+1);g.unshift(I(0,0)),g.push(I(T.lastLine(),T.getLineHandle(T.lastLine()).text.length));for(var H=null,y=T.getCursor(),F=0;F<g.length;F++){if((H==null||p(y,H)>0)&&p(y,g[F])<=0){W={start:H,end:g[F]};break}H=g[F]}if(W.start)for(var b=u.getRange(W.start,W.end,!1),F=0;F<b.length;F++){var m=b[F];if(He(m,function(Ae){var Ie=Ae.toUpperCase();Ie===D&&C(U)&&(_=U),Ie!==A.ALIAS_KEYWORD&&(U=Ae)}),_)break}return _}E.registerHelper("hint","sql",function(R,T){O=N(T&&T.tables);var u=T&&T.defaultTable,P=T&&T.disableKeywords;l=u&&C(u),L=n(R),d=a(R),u&&!l&&(l=Ne(u,R)),l=l||[],l.columns&&(l=l.columns);var D=R.getCursor(),U=[],_=R.getTokenAt(D),g,W,v;if(_.end>D.ch&&(_.end=D.ch,_.string=_.string.slice(0,D.ch-_.start)),_.string.match(/^[.`"'\w@][\w$#]*$/g)?(v=_.string,g=_.start,W=_.end):(g=W=D.ch,v=""),v.charAt(0)=="."||v.charAt(0)==d)g=$(D,_,U,R);else{var H=function(y,F){return typeof y=="object"?y.className=F:y={text:y,className:F},y};s(U,v,l,function(y){return H(y,"CodeMirror-hint-table CodeMirror-hint-default-table")}),s(U,v,O,function(y){return H(y,"CodeMirror-hint-table")}),P||s(U,v,L,function(y){return H(y.toUpperCase(),"CodeMirror-hint-keyword")})}return{list:U,from:I(D.line,g),to:I(D.line,W)}})})})();var te={exports:{}},re={exports:{}},X={exports:{}},dt=we,Ct=z,Lt=qe,ct="[object String]";function ft(e){return typeof e=="string"||!Ct(e)&&Lt(e)&&dt(e)==ct}var pt=ft,_t=Qe,Le=1/0,ht=17976931348623157e292;function Pt(e){if(!e)return e===0?e:0;if(e=_t(e),e===Le||e===-Le){var t=e<0?-1:1;return t*ht}return e===e?e:0}var Dt=Pt,vt=Dt;function Mt(e){var t=vt(e),E=t%1;return t===t?E?t-E:t:0}var ce=Mt;function Ut(e,t){for(var E=-1,O=e==null?0:e.length,l=Array(O);++E<O;)l[E]=t(e[E],E,e);return l}var fe=Ut,mt=fe;function gt(e,t){return mt(t,function(E){return e[E]})}var yt=gt,Ft=yt,Gt=$e;function Wt(e){return e==null?[]:Ft(e,Gt(e))}var Bt=Wt,Ht=Ce,Vt=Z,bt=pt,kt=ce,xt=Bt,Yt=Math.max;function Xt(e,t,E,O){e=Vt(e)?e:xt(e),E=E&&!O?kt(E):0;var l=e.length;return E<0&&(E=Yt(l+E,0)),bt(e)?E<=l&&e.indexOf(t,E)>-1:!!l&&Ht(e,t,E)>-1}var Kt=Xt,pe=Je,wt=fe,qt=z,Qt=ze,$t=1/0,_e=pe?pe.prototype:void 0,he=_e?_e.toString:void 0;function Pe(e){if(typeof e=="string")return e;if(qt(e))return wt(e,Pe)+"";if(Qt(e))return he?he.call(e):"";var t=e+"";return t=="0"&&1/e==-$t?"-0":t}var De=Pe;function Jt(e,t,E){var O=-1,l=e.length;t<0&&(t=-t>l?0:l+t),E=E>l?l:E,E<0&&(E+=l),l=t>E?0:E-t>>>0,t>>>=0;for(var L=Array(l);++O<l;)L[O]=e[O+t];return L}var zt=Jt,Zt=zt;function jt(e,t,E){var O=e.length;return E=E===void 0?O:E,!t&&E>=O?e:Zt(e,t,E)}var er=jt,tr=Ce;function rr(e,t){for(var E=e.length;E--&&tr(t,e[E],0)>-1;);return E}var Er=rr;function nr(e){return e.split("")}var ar=nr,or="\\ud800-\\udfff",sr="\\u0300-\\u036f",ir="\\ufe20-\\ufe2f",Tr="\\u20d0-\\u20ff",Rr=sr+ir+Tr,lr="\\ufe0e\\ufe0f",Nr="\\u200d",Ar=RegExp("["+Nr+or+Rr+lr+"]");function Ir(e){return Ar.test(e)}var Or=Ir,ve="\\ud800-\\udfff",Sr="\\u0300-\\u036f",ur="\\ufe20-\\ufe2f",dr="\\u20d0-\\u20ff",Cr=Sr+ur+dr,Lr="\\ufe0e\\ufe0f",cr="["+ve+"]",Ee="["+Cr+"]",ne="\\ud83c[\\udffb-\\udfff]",fr="(?:"+Ee+"|"+ne+")",Me="[^"+ve+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",me="[\\ud800-\\udbff][\\udc00-\\udfff]",pr="\\u200d",ge=fr+"?",ye="["+Lr+"]?",_r="(?:"+pr+"(?:"+[Me,Ue,me].join("|")+")"+ye+ge+")*",hr=ye+ge+_r,Pr="(?:"+[Me+Ee+"?",Ee,Ue,me,cr].join("|")+")",Dr=RegExp(ne+"(?="+ne+")|"+Pr+hr,"g");function vr(e){return e.match(Dr)||[]}var Mr=vr,Ur=ar,mr=Or,gr=Mr;function yr(e){return mr(e)?gr(e):Ur(e)}var Fr=yr,Gr=De;function Wr(e){return e==null?"":Gr(e)}var ae=Wr,Br=De,Hr=er,Vr=Er,Fe=Fr,br=ae,kr=Ze;function xr(e,t,E){if(e=br(e),e&&(E||t===void 0))return e.slice(0,kr(e)+1);if(!e||!(t=Br(t)))return e;var O=Fe(e),l=Vr(O,Fe(t))+1;return Hr(O,0,l).join("")}var Yr=xr,w={exports:{}};(function(e,t){t.__esModule=!0,t.default={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOPLEVEL:"reserved-toplevel",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"},e.exports=t.default})(w,w.exports);var oe={exports:{}},Xr=9007199254740991,Kr=Math.floor;function wr(e,t){var E="";if(!e||t<1||t>Xr)return E;do t%2&&(E+=e),t=Kr(t/2),t&&(e+=e);while(t);return E}var qr=wr,Qr=je,$r=Z,Jr=et,zr=tt;function Zr(e,t,E){if(!zr(E))return!1;var O=typeof t;return(O=="number"?$r(E)&&Jr(t,E.length):O=="string"&&t in E)?Qr(E[t],e):!1}var jr=Zr,eE=qr,tE=jr,rE=ce,EE=ae;function nE(e,t,E){return(E?tE(e,t,E):t===void 0)?t=1:t=rE(t),eE(EE(e),t)}var aE=nE;function oE(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var sE=oE;(function(e,t){t.__esModule=!0;var E=aE,O=d(E),l=sE,L=d(l);function d(n){return n&&n.__esModule?n:{default:n}}function A(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var I="top-level",p="block-level",c=function(){function n(a){A(this,n),this.indent=a||"  ",this.indentTypes=[]}return n.prototype.getIndent=function(){return(0,O.default)(this.indent,this.indentTypes.length)},n.prototype.increaseToplevel=function(){this.indentTypes.push(I)},n.prototype.increaseBlockLevel=function(){this.indentTypes.push(p)},n.prototype.decreaseTopLevel=function(){(0,L.default)(this.indentTypes)===I&&this.indentTypes.pop()},n.prototype.decreaseBlockLevel=function(){for(;this.indentTypes.length>0;){var r=this.indentTypes.pop();if(r!==I)break}},n}();t.default=c,e.exports=t.default})(oe,oe.exports);var se={exports:{}};(function(e,t){t.__esModule=!0;var E=w.exports,O=l(E);function l(I){return I&&I.__esModule?I:{default:I}}function L(I,p){if(!(I instanceof p))throw new TypeError("Cannot call a class as a function")}var d=50,A=function(){function I(){L(this,I),this.level=0}return I.prototype.beginIfPossible=function(c,n){this.level===0&&this.isInlineBlock(c,n)?this.level=1:this.level>0?this.level++:this.level=0},I.prototype.end=function(){this.level--},I.prototype.isActive=function(){return this.level>0},I.prototype.isInlineBlock=function(c,n){for(var a=0,r=0,o=n;o<c.length;o++){var N=c[o];if(a+=N.value.length,a>d)return!1;if(N.type===O.default.OPEN_PAREN)r++;else if(N.type===O.default.CLOSE_PAREN&&(r--,r===0))return!0;if(this.isForbiddenToken(N))return!1}return!1},I.prototype.isForbiddenToken=function(c){var n=c.type,a=c.value;return n===O.default.RESERVED_TOPLEVEL||n===O.default.RESERVED_NEWLINE||n===O.default.COMMENT||n===O.default.BLOCK_COMMENT||a===";"},I}();t.default=A,e.exports=t.default})(se,se.exports);var ie={exports:{}};(function(e,t){t.__esModule=!0;function E(l,L){if(!(l instanceof L))throw new TypeError("Cannot call a class as a function")}var O=function(){function l(L){E(this,l),this.params=L,this.index=0}return l.prototype.get=function(d){var A=d.key,I=d.value;return this.params?A?this.params[A]:this.params[this.index++]:I},l}();t.default=O,e.exports=t.default})(ie,ie.exports),function(e,t){t.__esModule=!0;var E=Kt,O=o(E),l=Yr,L=o(l),d=w.exports,A=o(d),I=oe.exports,p=o(I),c=se.exports,n=o(c),a=ie.exports,r=o(a);function o(S){return S&&S.__esModule?S:{default:S}}function N(S,h){if(!(S instanceof h))throw new TypeError("Cannot call a class as a function")}var C=function(){function S(h,s){N(this,S),this.cfg=h||{},this.indentation=new p.default(this.cfg.indent),this.inlineBlock=new n.default,this.params=new r.default(this.cfg.params),this.tokenizer=s,this.previousReservedWord={},this.tokens=[],this.index=0}return S.prototype.format=function(s){this.tokens=this.tokenizer.tokenize(s);var i=this.getFormattedQueryFromTokens();return i.trim()},S.prototype.getFormattedQueryFromTokens=function(){var s=this,i="";return this.tokens.forEach(function(f,$){s.index=$,f.type===A.default.WHITESPACE||(f.type===A.default.LINE_COMMENT?i=s.formatLineComment(f,i):f.type===A.default.BLOCK_COMMENT?i=s.formatBlockComment(f,i):f.type===A.default.RESERVED_TOPLEVEL?(i=s.formatToplevelReservedWord(f,i),s.previousReservedWord=f):f.type===A.default.RESERVED_NEWLINE?(i=s.formatNewlineReservedWord(f,i),s.previousReservedWord=f):f.type===A.default.RESERVED?(i=s.formatWithSpaces(f,i),s.previousReservedWord=f):f.type===A.default.OPEN_PAREN?i=s.formatOpeningParentheses(f,i):f.type===A.default.CLOSE_PAREN?i=s.formatClosingParentheses(f,i):f.type===A.default.PLACEHOLDER?i=s.formatPlaceholder(f,i):f.value===","?i=s.formatComma(f,i):f.value===":"?i=s.formatWithSpaceAfter(f,i):f.value==="."?i=s.formatWithoutSpaces(f,i):f.value===";"?i=s.formatQuerySeparator(f,i):i=s.formatWithSpaces(f,i))}),i},S.prototype.formatLineComment=function(s,i){return this.addNewline(i+s.value)},S.prototype.formatBlockComment=function(s,i){return this.addNewline(this.addNewline(i)+this.indentComment(s.value))},S.prototype.indentComment=function(s){return s.replace(/\n/g,`
`+this.indentation.getIndent())},S.prototype.formatToplevelReservedWord=function(s,i){return this.indentation.decreaseTopLevel(),i=this.addNewline(i),this.indentation.increaseToplevel(),i+=this.equalizeWhitespace(s.value),this.addNewline(i)},S.prototype.formatNewlineReservedWord=function(s,i){return this.addNewline(i)+this.equalizeWhitespace(s.value)+" "},S.prototype.equalizeWhitespace=function(s){return s.replace(/\s+/g," ")},S.prototype.formatOpeningParentheses=function(s,i){var f=[A.default.WHITESPACE,A.default.OPEN_PAREN,A.default.LINE_COMMENT];return(0,O.default)(f,this.previousToken().type)||(i=(0,L.default)(i)),i+=s.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),i=this.addNewline(i)),i},S.prototype.formatClosingParentheses=function(s,i){return this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(s,i)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(s,this.addNewline(i)))},S.prototype.formatPlaceholder=function(s,i){return i+this.params.get(s)+" "},S.prototype.formatComma=function(s,i){return i=this.trimTrailingWhitespace(i)+s.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?i:this.addNewline(i)},S.prototype.formatWithSpaceAfter=function(s,i){return this.trimTrailingWhitespace(i)+s.value+" "},S.prototype.formatWithoutSpaces=function(s,i){return this.trimTrailingWhitespace(i)+s.value},S.prototype.formatWithSpaces=function(s,i){return i+s.value+" "},S.prototype.formatQuerySeparator=function(s,i){return this.trimTrailingWhitespace(i)+s.value+`
`},S.prototype.addNewline=function(s){return(0,L.default)(s)+`
`+this.indentation.getIndent()},S.prototype.trimTrailingWhitespace=function(s){return this.previousNonWhitespaceToken().type===A.default.LINE_COMMENT?(0,L.default)(s)+`
`:(0,L.default)(s)},S.prototype.previousNonWhitespaceToken=function(){for(var s=1;this.previousToken(s).type===A.default.WHITESPACE;)s++;return this.previousToken(s)},S.prototype.previousToken=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.tokens[this.index-s]||{}},S}();t.default=C,e.exports=t.default}(X,X.exports);var K={exports:{}},iE=rt,TE=Et,RE=nt,lE=z,NE=Z,AE=at.exports,IE=ot,OE=st,SE="[object Map]",uE="[object Set]",dE=Object.prototype,CE=dE.hasOwnProperty;function LE(e){if(e==null)return!0;if(NE(e)&&(lE(e)||typeof e=="string"||typeof e.splice=="function"||AE(e)||OE(e)||RE(e)))return!e.length;var t=TE(e);if(t==SE||t==uE)return!e.size;if(IE(e))return!iE(e).length;for(var E in e)if(CE.call(e,E))return!1;return!0}var cE=LE,fE=ae,Ge=/[\\^$.*+?()[\]{}|]/g,pE=RegExp(Ge.source);function _E(e){return e=fE(e),e&&pE.test(e)?e.replace(Ge,"\\$&"):e}var hE=_E;(function(e,t){t.__esModule=!0;var E=cE,O=I(E),l=hE,L=I(l),d=w.exports,A=I(d);function I(n){return n&&n.__esModule?n:{default:n}}function p(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var c=function(){function n(a){p(this,n),this.WHITESPACE_REGEX=/^(\s+)/,this.NUMBER_REGEX=/^((-\s*)?[0-9]+(\.[0-9]+)?|0x[0-9a-fA-F]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|->>|->|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|.)/,this.BLOCK_COMMENT_REGEX=/^(\/\*[^]*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(a.lineCommentTypes),this.RESERVED_TOPLEVEL_REGEX=this.createReservedWordRegex(a.reservedToplevelWords),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(a.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(a.reservedWords),this.WORD_REGEX=this.createWordRegex(a.specialWordChars),this.STRING_REGEX=this.createStringRegex(a.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(a.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(a.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(a.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(a.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(a.namedPlaceholderTypes,this.createStringPattern(a.stringTypes))}return n.prototype.createLineCommentRegex=function(r){return new RegExp("^((?:"+r.map(function(o){return(0,L.default)(o)}).join("|")+`).*?(?:
|$))`)},n.prototype.createReservedWordRegex=function(r){var o=r.join("|").replace(/ /g,"\\s+");return new RegExp("^("+o+")\\b","i")},n.prototype.createWordRegex=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new RegExp("^([\\w"+r.join("")+"]+)")},n.prototype.createStringRegex=function(r){return new RegExp("^("+this.createStringPattern(r)+")")},n.prototype.createStringPattern=function(r){var o={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return r.map(function(N){return o[N]}).join("|")},n.prototype.createParenRegex=function(r){var o=this;return new RegExp("^("+r.map(function(N){return o.escapeParen(N)}).join("|")+")","i")},n.prototype.escapeParen=function(r){return r.length===1?(0,L.default)(r):"\\b"+r+"\\b"},n.prototype.createPlaceholderRegex=function(r,o){if((0,O.default)(r))return!1;var N=r.map(L.default).join("|");return new RegExp("^((?:"+N+")(?:"+o+"))")},n.prototype.tokenize=function(r){for(var o=[],N=void 0;r.length;)N=this.getNextToken(r,N),r=r.substring(N.value.length),o.push(N);return o},n.prototype.getNextToken=function(r,o){return this.getWhitespaceToken(r)||this.getCommentToken(r)||this.getStringToken(r)||this.getOpenParenToken(r)||this.getCloseParenToken(r)||this.getPlaceholderToken(r)||this.getNumberToken(r)||this.getReservedWordToken(r,o)||this.getWordToken(r)||this.getOperatorToken(r)},n.prototype.getWhitespaceToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.WHITESPACE,regex:this.WHITESPACE_REGEX})},n.prototype.getCommentToken=function(r){return this.getLineCommentToken(r)||this.getBlockCommentToken(r)},n.prototype.getLineCommentToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})},n.prototype.getBlockCommentToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})},n.prototype.getStringToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.STRING,regex:this.STRING_REGEX})},n.prototype.getOpenParenToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})},n.prototype.getCloseParenToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})},n.prototype.getPlaceholderToken=function(r){return this.getIdentNamedPlaceholderToken(r)||this.getStringNamedPlaceholderToken(r)||this.getIndexedPlaceholderToken(r)},n.prototype.getIdentNamedPlaceholderToken=function(r){return this.getPlaceholderTokenWithKey({input:r,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(N){return N.slice(1)}})},n.prototype.getStringNamedPlaceholderToken=function(r){var o=this;return this.getPlaceholderTokenWithKey({input:r,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(C){return o.getEscapedPlaceholderKey({key:C.slice(2,-1),quoteChar:C.slice(-1)})}})},n.prototype.getIndexedPlaceholderToken=function(r){return this.getPlaceholderTokenWithKey({input:r,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(N){return N.slice(1)}})},n.prototype.getPlaceholderTokenWithKey=function(r){var o=r.input,N=r.regex,C=r.parseKey,S=this.getTokenOnFirstMatch({input:o,regex:N,type:A.default.PLACEHOLDER});return S&&(S.key=C(S.value)),S},n.prototype.getEscapedPlaceholderKey=function(r){var o=r.key,N=r.quoteChar;return o.replace(new RegExp((0,L.default)("\\")+N,"g"),N)},n.prototype.getNumberToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.NUMBER,regex:this.NUMBER_REGEX})},n.prototype.getOperatorToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.OPERATOR,regex:this.OPERATOR_REGEX})},n.prototype.getReservedWordToken=function(r,o){if(!(o&&o.value&&o.value==="."))return this.getToplevelReservedToken(r)||this.getNewlineReservedToken(r)||this.getPlainReservedToken(r)},n.prototype.getToplevelReservedToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.RESERVED_TOPLEVEL,regex:this.RESERVED_TOPLEVEL_REGEX})},n.prototype.getNewlineReservedToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})},n.prototype.getPlainReservedToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})},n.prototype.getWordToken=function(r){return this.getTokenOnFirstMatch({input:r,type:A.default.WORD,regex:this.WORD_REGEX})},n.prototype.getTokenOnFirstMatch=function(r){var o=r.input,N=r.type,C=r.regex,S=o.match(C);if(S)return{type:N,value:S[1]}},n}();t.default=c,e.exports=t.default})(K,K.exports),function(e,t){t.__esModule=!0;var E=X.exports,O=d(E),l=K.exports,L=d(l);function d(r){return r&&r.__esModule?r:{default:r}}function A(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}var I=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],p=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UPDATE","VALUES","WHERE"],c=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],n=void 0,a=function(){function r(o){A(this,r),this.cfg=o}return r.prototype.format=function(N){return n||(n=new L.default({reservedWords:I,reservedToplevelWords:p,reservedNewlineWords:c,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new O.default(this.cfg,n).format(N)},r}();t.default=a,e.exports=t.default}(re,re.exports);var Te={exports:{}};(function(e,t){t.__esModule=!0;var E=X.exports,O=d(E),l=K.exports,L=d(l);function d(r){return r&&r.__esModule?r:{default:r}}function A(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}var I=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],p=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","INTERSECT ALL","INTERSECT","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],c=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],n=void 0,a=function(){function r(o){A(this,r),this.cfg=o}return r.prototype.format=function(N){return n||(n=new L.default({reservedWords:I,reservedToplevelWords:p,reservedNewlineWords:c,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new O.default(this.cfg,n).format(N)},r}();t.default=a,e.exports=t.default})(Te,Te.exports);var Re={exports:{}};(function(e,t){t.__esModule=!0;var E=X.exports,O=d(E),l=K.exports,L=d(l);function d(r){return r&&r.__esModule?r:{default:r}}function A(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}var I=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],p=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UNION ALL","UNION","UPDATE","VALUES","WHERE"],c=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],n=void 0,a=function(){function r(o){A(this,r),this.cfg=o}return r.prototype.format=function(N){return n||(n=new L.default({reservedWords:I,reservedToplevelWords:p,reservedNewlineWords:c,stringTypes:['""',"N''","''","``"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new O.default(this.cfg,n).format(N)},r}();t.default=a,e.exports=t.default})(Re,Re.exports);var le={exports:{}};(function(e,t){t.__esModule=!0;var E=X.exports,O=d(E),l=K.exports,L=d(l);function d(r){return r&&r.__esModule?r:{default:r}}function A(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}var I=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],p=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UPDATE","VALUES","WHERE"],c=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],n=void 0,a=function(){function r(o){A(this,r),this.cfg=o}return r.prototype.format=function(N){return n||(n=new L.default({reservedWords:I,reservedToplevelWords:p,reservedNewlineWords:c,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new O.default(this.cfg,n).format(N)},r}();t.default=a,e.exports=t.default})(le,le.exports),function(e,t){t.__esModule=!0;var E=re.exports,O=c(E),l=Te.exports,L=c(l),d=Re.exports,A=c(d),I=le.exports,p=c(I);function c(n){return n&&n.__esModule?n:{default:n}}t.default={format:function(a,r){switch(r=r||{},r.language){case"db2":return new O.default(r).format(a);case"n1ql":return new L.default(r).format(a);case"pl/sql":return new A.default(r).format(a);case"sql":case void 0:return new p.default(r).format(a);default:throw Error("Unsupported SQL dialect: "+r.language)}}},e.exports=t.default}(te,te.exports);var We=it(te.exports),Be=Tt({name:"SelectData",components:{codemirror:Ke},setup(){const e=Rt(null),t=lt({dbs:[],tables:[],dbId:"",tableName:"",tableMetadata:[],columnMetadata:[],sql:"",selectRes:{tableColumn:[],data:[]},params:{pageNum:1,pageSize:10},cmOptions:{tabSize:4,mode:"text/x-sql",lineNumbers:!0,line:!0,indentWithTabs:!0,smartIndent:!0,theme:"base16-light",autofocus:!0,extraKeys:{Tab:"autocomplete"},hintOptions:{completeSingle:!1,tables:{}}}}),E=Nt(()=>e.value.coder),O=o=>"mysql";At(()=>{r()});const l=(o,N)=>{/^[a-zA-Z]/.test(N.text[0])&&n()},L=async()=>{Q(t.dbId,"\u8BF7\u5148\u9009\u62E9\u6570\u636E\u5E93");let o=d();Q(o,"\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");const N=await Y.selectData.request({id:t.dbId,sql:o});let C,S;N.length>0?(C=Object.keys(N[0]),S=N):(C=[],S=[]),t.selectRes.tableColumn=C,t.selectRes.data=S},d=()=>{let o=E.value.getSelection();return o==""&&(o=t.sql),o},A=async()=>{Q(t.sql,"sql\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"),Q(t.dbId,"\u8BF7\u5148\u9009\u62E9\u6570\u636E\u5E93"),await Y.saveSql.request({id:t.dbId,sql:t.sql,type:1}),Ot.success("\u4FDD\u5B58\u6210\u529F")},I=o=>{!o||(p(),Y.tableMetadata.request({id:o}).then(N=>{t.tableMetadata=N,t.tableMetadata.length>0&&(t.tableName=t.tableMetadata[0].name,c(t.tableName))}),Y.hintTables.request({id:t.dbId}).then(N=>{t.cmOptions.hintOptions.tables=N}),Y.getSql.request({id:o,type:1}).then(N=>{N&&(t.sql=N)}))},p=()=>{t.tableName="",t.tableMetadata=[],t.columnMetadata=[],t.selectRes.data=[],t.selectRes.tableColumn=[],t.sql=""},c=async o=>{o!=""&&(t.columnMetadata=await Y.columnMetadata.request({id:t.dbId,table:o}))},n=()=>{E.value.showHint()},a=()=>{let o=E.value.getSelection();o!=""?E.value.replaceSelection(We.format(o)):E.value.setValue(We.format(t.sql))},r=async()=>{t.dbs=await Y.dbs.request(t.params)};return de(ue({},It(t)),{cmEditor:e,dbTypeName:O,inputRead:l,changeTable:c,runSql:L,saveSql:A,changeDb:I,clearDb:p,formatSql:a})}}),xE="";const PE={class:"toolbar"},DE={class:"fl"},vE={class:"toolbar"},ME={class:"fl"},UE=q("\u6267\u884C"),mE=q("\u683C\u5F0F\u5316"),gE=q("\u4FDD\u5B58");function yE(e,t,E,O,l,L){const d=V("el-option"),A=V("el-select"),I=V("el-button"),p=V("codemirror"),c=V("el-aside"),n=V("el-header"),a=V("el-table-column"),r=V("el-table"),o=V("el-main"),N=V("el-container");return k(),x("div",null,[M("div",PE,[M("div",DE,[M(A,{size:"small",modelValue:e.dbId,"onUpdate:modelValue":t[1]||(t[1]=C=>e.dbId=C),placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5E93",onChange:e.changeDb,onClear:e.clearDb,clearable:"",filterable:""},{default:B(()=>[(k(!0),x(j,null,ee(e.dbs,C=>(k(),x(d,{key:C.id,label:`${C.name} [${e.dbTypeName(C.type)}]`,value:C.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange","onClear"])])]),M(N,{style:{height:"50%",border:"1px solid #eee","margin-top":"1px"}},{default:B(()=>[M(c,{width:"70%",style:{"background-color":"rgb(238, 241, 246)"}},{default:B(()=>[M("div",vE,[M("div",ME,[M(I,{onClick:e.runSql,type:"success",icon:"el-icon-video-play",size:"mini",plain:""},{default:B(()=>[UE]),_:1},8,["onClick"]),M(I,{onClick:e.formatSql,type:"primary",icon:"el-icon-magic-stick",size:"mini",plain:""},{default:B(()=>[mE]),_:1},8,["onClick"]),M(I,{onClick:e.saveSql,type:"primary",icon:"el-icon-document-add",size:"mini",plain:""},{default:B(()=>[gE]),_:1},8,["onClick"])])]),M(p,{class:"codesql",ref:"cmEditor",language:"sql",modelValue:e.sql,"onUpdate:modelValue":t[2]||(t[2]=C=>e.sql=C),options:e.cmOptions},null,8,["modelValue","options"])]),_:1}),M(N,{style:{"margin-left":"2px"}},{default:B(()=>[M(n,{style:{"text-align":"left",height:"45px","font-size":"12px",padding:"0px"}},{default:B(()=>[M(A,{modelValue:e.tableName,"onUpdate:modelValue":t[3]||(t[3]=C=>e.tableName=C),placeholder:"\u8BF7\u9009\u62E9\u8868",onChange:e.changeTable,clearable:"",filterable:"",style:{width:"99%"}},{default:B(()=>[(k(!0),x(j,null,ee(e.tableMetadata,C=>(k(),x(d,{key:C.name,label:C.name+(C.comment!=""?`\u3010${C.comment}\u3011`:""),value:C.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),M(o,{style:{padding:"0px",height:"100%",overflow:"hidden"}},{default:B(()=>[M(r,{data:e.columnMetadata,height:"100%",size:"mini"},{default:B(()=>[M(a,{prop:"name",label:"\u540D\u79F0"}),M(a,{prop:"type",label:"\u7C7B\u578B"},{default:B(C=>[q(St(`${C.row.type}(${C.row.size})`),1)]),_:1}),M(a,{prop:"comment",label:"\u5907\u6CE8"})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),M(r,{style:{"margin-top":"1px"},data:e.selectRes.data,size:"mini","max-height":"300",stripe:"",border:""},{default:B(()=>[(k(!0),x(j,null,ee(e.selectRes.tableColumn,C=>(k(),x(a,{"min-width":"92",align:"center",key:C,prop:C,label:C},null,8,["prop","label"]))),128))]),_:1},8,["data"])])}Be.render=yE;export default Be;
